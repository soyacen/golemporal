// Code generated by protoc-gen-golemporal. DO NOT EDIT.

package api

import (
	context "context"

	starter "github.com/soyacen/golemporal/starter"
	activity "go.temporal.io/sdk/activity"
	client "go.temporal.io/sdk/client"
	worker "go.temporal.io/sdk/worker"
	workflow "go.temporal.io/sdk/workflow"
)

type GreeterWorkflowClient interface {
	Hello(ctx context.Context, in *HelloRequest, opts ...starter.Option) (*HelloResponse, error)
}

type greeterWorkflowClient struct {
	c         client.Client
	taskQueue string
}

func NewGreeterWorkflowClient(c client.Client, taskQueue string) GreeterWorkflowClient {
	return &greeterWorkflowClient{c: c, taskQueue: taskQueue}
}

func (c *greeterWorkflowClient) Hello(ctx context.Context, in *HelloRequest, opts ...starter.Option) (*HelloResponse, error) {
	run, err := c.c.ExecuteWorkflow(ctx, starter.NewOptions(c.taskQueue, opts...), "/golemporal.example.api.GreeterWorkflow/Hello", in)
	if err != nil {
		return nil, err
	}
	out := new(HelloResponse)
	if err := run.Get(ctx, out); err != nil {
		return nil, err
	}
	return out, nil
}

type GreeterWorkflowServer interface {
	Hello(workflow.Context, *HelloRequest) (*HelloResponse, error)
}

type GreeterActivityClient interface {
	SayHello(ctx workflow.Context, in *HelloRequest) (*HelloResponse, error)
}

func NewGreeterActivityClient() GreeterActivityClient {
	return &greeterActivityClient{}
}

type greeterActivityClient struct{}

func (c *greeterActivityClient) SayHello(ctx workflow.Context, in *HelloRequest) (*HelloResponse, error) {
	var out HelloResponse
	err := workflow.ExecuteActivity(ctx, "/golemporal.example.api.GreeterActivity/SayHello", in).Get(ctx, &out)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

type GreeterActivityServer interface {
	SayHello(context.Context, *HelloRequest) (*HelloResponse, error)
}

func RegisterGreeterWorkflowServerWorker(w worker.Worker, srv GreeterWorkflowServer) {
	w.RegisterWorkflowWithOptions(srv.Hello, workflow.RegisterOptions{
		Name:                          "/golemporal.example.api.GreeterWorkflow/Hello",
		DisableAlreadyRegisteredCheck: true,
	})
}

func RegisterGreeterActivityServer(w worker.Worker, srv GreeterActivityServer) {
	w.RegisterActivityWithOptions(srv.SayHello, activity.RegisterOptions{
		Name:                          "/golemporal.example.api.GreeterActivity/SayHello",
		DisableAlreadyRegisteredCheck: true,
	})
}
